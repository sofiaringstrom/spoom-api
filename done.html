<!DOCTYPE html>
<html>
<head>
  <title>Swotify</title>

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <style type="text/css">
    
  </style>
</head>
<body>

  <div class="container">
    <div class="col s12">
      <h1 class="center-align">Swotify API</h1>
      <h2 class="center-align">done!</h2>
    </div>
  </div>

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <script type="text/javascript">
    function getQueryStringValue (key) {  
      return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + encodeURIComponent(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
    }

    var access_token = getQueryStringValue('code');

    // get code from cookie
    var cookieValue = document.cookie.replace(/(?:(?:^|.*;\s*)swotify_code\s*\=\s*([^;]*).*$)|^.*$/, "$1");

    // send access_token to api

    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", "http://localhost:7000/callback", true);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send("code=" + cookieValue + "&access_token=" + access_token);

    // in api, send access_token to app (socket)

  </script>

</body>
</html>